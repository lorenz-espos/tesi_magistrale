`

**Important**. Please do not use _print_, _sys.write_ or any other functions to display text. Do use handler
object for that. Do not preformat or colorize your text manually - do use **PupyOutput** text hints.

## Modules

**Modules** - special commands to execute some action on one or group of clients. **Modules** executed using
[**run**](commands/run.py) command. **Module** should be subclass of [**PupyModule**](pupylib/PupyModule.py).

To properly operate **module** should specify (or leave default values) for set of important [properties][26].

1. **qa**. Specify the robustness of the module. `

`.
3. **dependencies**. Describes which libraries(**packages**) should be uploaded to client. This value should be set
either to _list_ or _dict_. In case **dependencies** has _list_ value, this set of dependenceis will be applied to
clients executed on all platforms. If different dependencies should be specified according to client's OS _dict_
should be used. In this case the key will be OS (_linux_, _windows_, _android_ etc) and value will be the list of
dependencies.
4. **compatible_systems**. The set of OS (_linux_, _windows_, _android_ etc) which supports this module. Also can
be specified using keyword **compat** of **@config** decorator.

Module should also implement at least two methods:

1. **init_argparse**. *Class-method* which is used to parse arguments. Please note that this method 
**can not use any state**. **init_argparse** should initialize *Class-variable* arg_parser.
2. **run**. Entry point of module. Takes **args** _dict_ which is return value of **arg_parser** which is 
generated by **init_argparse**.

Here is an example of simple module - [modules/pwd.py](modules/pwd.py). 

`

`

1. **module**. String name of required module (like 'os' or 'os.path'). Classess are not allowed.
In case other args are omitted, will return NetRef to the remote module with specified name. 
In case **function** is *None* (default), **need_obtain** argument is ignored.
2. **function**. String name of required function (like 'abspath' in 'os.path' module). Classess are not 
allowed. Will return wrapper to required function.
3. **need_obtain**. In case **function** was specified and **need_obtain** is *True* result
   will also transparently marshal arguments using msgpack. Result will also be transparently unmarshal with
   msgpack. **need_obtain** should be set to *False* in case classess or other mutable references will be 
   passed or expected to be returned.

Do not use any special logic in case you want to run module in background (while connection established). 
Just run module with *-b* argument.

In case some task should be executed independently from connection, **Task** abstraction should be used.
Nice examples of **Task** can be found at [modules/keylogger.py](modules/keylogger.py), 
[packages/windows/all/pupwinutils/keylogger.py](packages/windows/all/pupwinutils/keylogger.py) and
[modules/psh.py](modules/psh.py), [packages/windows/all/powershell.py](packages/windows/all/powershell.py).

Do care about interruptions and cleanup. There are plenty of reasons why things can go wrong.

Template for interruptions.

`

